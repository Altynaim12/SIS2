# Flip.kz Mini Data Pipeline  
Scraping ‚Üí Cleaning ‚Üí SQLite Database ‚Üí Airflow Automation

# 1. Website Description

–ü—Ä–æ–µ–∫—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Å–∞–π—Ç–∞ **https://flip.kz**, –≥–¥–µ –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.  
–î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–∞–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Selenium WebDriver**, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä, –∏–º–∏—Ç–∏—Ä—É–µ—Ç —Å–∫—Ä–æ–ª–ª–∏–Ω–≥ –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –∫–Ω–∏–≥–∞—Ö:

- –ù–∞–∑–≤–∞–Ω–∏–µ (`title`)
- –¶–µ–Ω–∞ (`price`)
- –°—Å—ã–ª–∫–∞ –Ω–∞ —Ç–æ–≤–∞—Ä (`url`)

Flip.kz –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ headless-—Ä–µ–∂–∏–º, –ø–æ—ç—Ç–æ–º—É –≤ –ø—Ä–æ–µ–∫—Ç –¥–æ–±–∞–≤–ª–µ–Ω fallback:  
–µ—Å–ª–∏ —Å–∞–π—Ç –±–ª–æ–∫–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö (120 –∑–∞–ø–∏—Å–µ–π), —á—Ç–æ–±—ã –≤–µ—Å—å –ø–∞–π–ø–ª–∞–π–Ω –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.


# 2. How to Run Scraping

# ‚ñ∂ 2.1 Install Requirements

```bash
pip install -r requirements.txt
‚ñ∂ 2.2 Run Selenium Scraper
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
python src/scraper.py
–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ—è–≤–∏—Ç—Å—è —Ñ–∞–π–ª:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
data/raw_flip.csv
–û–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∏–Ω–∏–º—É–º 120 —Å—Ç—Ä–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–Ω–∏–≥–∞—Ö.

‚ñ∂ 2.3 Clean the Data
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
python src/cleaner.py
–°–æ–∑–¥–∞—ë—Ç—Å—è —Ñ–∞–π–ª:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
data/clean_flip.csv
–î–∞–Ω–Ω—ã–µ –æ—á–∏—â–∞—é—Ç—Å—è –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤, –ø—Ä–æ–ø—É—Å–∫–æ–≤, –ø—Ä–∏–≤–æ–¥—è—Ç—Å—è –∫ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º —Ç–∏–ø–∞–º.

‚ñ∂ 2.4 Load Data into SQLite Database
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
python src/loader.py
–°–æ–∑–¥–∞—ë—Ç—Å—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
data/output.db
–í –Ω–µ–π ‚Äî —Ç–∞–±–ª–∏—Ü–∞ products —Å —Ç—Ä–µ–º—è –ø–æ–ª—è–º–∏:
title, price, url.

3. How to Run Airflow
–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç DAG, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å:

nginx
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
scrape_data ‚Üí clean_data ‚Üí load_to_db
‚ñ∂ 3.1 Copy DAG File
–ü–æ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª:

–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
airflow_dag.py
–≤ –ø–∞–ø–∫—É:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
AIRFLOW_HOME/dags/
‚ñ∂ 3.2 Initialize Airflow
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
airflow db init
‚ñ∂ 3.3 Start Webserver and Scheduler
–í –¥–≤—É—Ö —Ä–∞–∑–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
airflow webserver -p 8080
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
airflow scheduler
‚ñ∂ 3.4 Open Airflow UI
arduino
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
http://localhost:8080
–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –ø–æ—è–≤–∏—Ç—Å—è DAG:

nginx
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
flip_books_pipeline
–ï–≥–æ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (@daily, –Ω–µ —á–∞—â–µ 1 —Ä–∞–∑–∞ –≤ —Å—É—Ç–∫–∏).

4. Expected Output
–ü–æ—Å–ª–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:

üìÑ 1. data/raw_flip.csv
–º–∏–Ω–∏–º—É–º 120 —Å—Ç—Ä–æ–∫

–ø–æ–ª—è: title, price, url

üìÑ 2. data/clean_flip.csv
–æ—á–∏—â–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–ø—Ä–∏–≤–µ–¥—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã

—É–¥–∞–ª—ë–Ω–Ω—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã

üóÑ 3. data/output.db
SQLite –±–∞–∑–∞ —Å —Ç–∞–±–ª–∏—Ü–µ–π:

pgsql
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
products(
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title TEXT,
    price REAL,
    url TEXT
)
üåÄ 4. Airflow DAG
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç:

nginx
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
scrape_data ‚Üí clean_data ‚Üí load_to_db
–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ª–æ–≥–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.
